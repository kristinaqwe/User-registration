
1. import tkinter as tk: Импортирует библиотеку Tkinter, которая используется для создания графических интерфейсов в Python. Мы используем псевдоним tk для удобства.
3. from tkinter import messagebox: Импортирует модуль messagebox, который позволяет отображать всплывающие окна для сообщений пользователю (например, об успешной регистрации или ошибке).
4. import sqlite3: Импортирует библиотеку sqlite3, которая предоставляет интерфейс для работы с базами данных SQLite, позволяя создавать, изменять и запрашивать базы данных.
 def create_db():: Определяет функцию create_db, которая создает базу данных и таблицу пользователей.

  
conn = sqlite3.connect('users.db'): Устанавливает соединение с базой данных users.db. Если файл базы данных не существует, он будет создан.

c = conn.cursor(): Создает объект курсора c, который используется для выполнения SQL-запросов.

c.execute(...): Выполняет SQL-запрос для создания таблицы users, если она еще не существует. Таблица содержит три поля:

id: уникальный идентификатор (целое число, автоматически увеличивается).

username: имя пользователя (текст, должно быть уникальным).

password: пароль (текст).

conn.commit(): Сохраняет изменения в базе данных.

conn.close(): Закрывает соединение с базой данных.


def register_user(username, password):: Определяет функцию register_user, которая добавляет нового пользователя в базу данных.

conn = sqlite3.connect('users.db'): Устанавливает соединение с базой данных.

c = conn.cursor(): Создает объект курсора.

try:: Начинает блок обработки исключений.

c.execute(...): Выполняет SQL-запрос для вставки нового пользователя в таблицу users. Используется параметризованный запрос для предотвращения SQL-инъекций.

conn.commit(): Сохраняет изменения в базе данных.

essagebox.showinfo(...): Показывает информационное сообщение о том, что пользователь успешно зарегистрирован.

except sqlite3.IntegrityError:: Обрабатывает исключение, если имя пользователя уже существует (нарушение уникальности).

messagebox.showerror(...): Показывает сообщение об ошибке, если пользователь с таким именем уже зарегистрирован.

finally:: Блок кода, который выполняется в любом случае после завершения блока try.


conn.close(): Закрывает соединение с базой данных.

def login_user(username, password):: Определяет функцию login_user, которая проверяет, существует ли пользователь с заданным именем и паролем.

conn = sqlite3.connect('users.db'): Устанавливает соединение с базой данных.

c = conn.cursor(): Создает объект курсора.

c.execute(...): Выполняет SQL-запрос для поиска пользователя по имени и паролю.

user = c.fetchone(): Извлекает первую строку результата запроса (если такая есть). Если пользователь найден, переменная user будет содержать данные о нем.

conn.close(): Закрывает соединение с базой данных.

return user is not None: Возвращает True, если пользователь найден, иначе — False.


def open_registration_window():: Определяет функцию для открытия окна регистрации.

registration_window = tk.Toplevel(root): Создает новое окно (вторичное) поверх основного окна приложения.

registration_window.title("Регистрация"): Устанавливает заголовок для нового окна.

tk.Label(...): Создает метку с текстом "Логин:" и добавляет ее в окно регистрации.

username_entry = tk.Entry(registration_window): Создает поле ввода для имени пользователя и добавляет его в окно регистрации.

.pack(): Располагает элемент в окне по умолчанию (в вертикальном порядке).

tk.Label(...): Создает метку с текстом "Пароль:" и добавляет ее в окно регистрации.

password_entry = tk.Entry(registration_window, show="*"): Создает поле ввода для пароля (с символами замены) и добавляет его в окно регистрации.

def register():: Вложенная функция, которая получает введенные данные и вызывает функцию регистрации пользователя.

username = username_entry.get(): Получает введенное имя пользователя из поля ввода.

password = password_entry.get(): Получает введенный пароль из поля ввода.

tk.Button(...): Создает кнопку "Зарегистрироваться" и связывает ее с функцией register.


def login():: Определяет функцию входа в систему.

username = username_entry.get(): Получает введенное имя пользователя из основного окна.

password = password_entry.get(): Получает введенный пароль из основного окна.

if login_user(username, password):: Проверяет, успешна ли авторизация с помощью функции login_user.

messagebox.showinfo(...): Показывает сообщение об успехе при успешной авторизации.

else: Если авторизация не удалась...

messagebox.showerror(...): Показывает сообщение об ошибке при неверном логине или пароле.

root = tk.Tk(): Создает основное окно приложения.

root.title("Авторизация"): Устанавливает заголовок основного окна на "Авторизация"

create_db()  # Создаем базу данных: Вызывает функцию для создания базы данных и таблицы пользователей при запуске приложения.

tk.Label(root, text="Логин:").pack(): Создает метку "Логин:" и добавляет ее в основное окно.

username_entry = tk.Entry(root): Создает поле ввода для имени пользователя и добавляет его в основное окно.

.pack(): Располагает элемент в окне по умолчанию.

tk.Label(root, text="Пароль:").pack(): Создает метку "Пароль:" и добавляет ее в основное окно.

password_entry = tk.Entry(root, show="*"): Создает поле ввода для пароля (с символами замены) и добавляет его в основное окно.

tk.Button(root, text="Войти", command=login).pack(): Создает кнопку "Войти" и связывает ее с функцией login.

tk.Button(root, text="Регистрация", command=open_registration_window).pack(): Создает кнопку "Регистрация" и связывает ее с функцией open_registration_window.

root.mainloop(): Запускает основной цикл приложения, который ожидает взаимодействия пользователя с интерфейсом


